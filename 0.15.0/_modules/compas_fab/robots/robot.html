<!DOCTYPE html>
<html lang="en">
<head>
  <title>compas_fab - compas_fab.robots.robot</title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <meta name="author" content="" />
  <meta name="description" content="" />

  <link rel="shortcut icon" href="../../../_static/images/compas.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/default.min.css">
  <link rel="stylesheet" type="text/css" href="../../../_static/css/compas.css" />
  <link rel="stylesheet" type="text/css" href="../../../_static/css/compas-reference.css" />

  

  

  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <style>
    .footer-text,
    .footer-link,
    .footer-title {
      color: rgba(255, 255, 255, 0.25);
    }
    .footer-link:hover {
      color: rgba(255, 255, 255, 0.5);
    }
    </style>
</head>

<body data-spy="scroll" data-target="#compas-toc">
  <!-- header -->
  <header id="header" class="compas-header d-flex align-items-center">
    <nav class="navbar navbar-expand navbar-dark col flex-column flex-md-row text-center">
      <!-- brand -->
      <a class="navbar-brand" href="https://compas.dev/compas_fab/">
        <img src="../../../_static/images/compas_icon_white.png" alt="COMPAS FAB" width="48px" height="48px" />
      </a>
      <!-- brand -->
      <!-- primary -->
      <ul class="navbar-nav">
        <li class="nav-item active"><a class="nav-link" href="https://compas.dev/compas_fab/">COMPAS FAB</a></li>
      </ul>
      <!-- primary -->
      <ul class="navbar-nav d-none d-md-flex ml-md-auto">
        <!-- version -->
        
        <meta id="doc_versions" data-url="https://compas.dev/compas_fab/doc_versions.txt" data-docs="https://compas.dev/compas_fab/">
        <li class="nav-item nav-versions dropdown">
          <a class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="bd-versions" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            0.15.0
          </a>
          <div id="doc_version_list" class="dropdown-menu dropdown-menu-md-right" aria-labelledby="bd-versions"></div>
        </li>
        
        <!-- version -->
        <!-- social -->
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/compas-dev/compas_fab" target="_blank">
            <span class="fab fa-github fa-1x"></span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="http://forum.compas-framework.org" target="_blank">
            <span class="fab fa-discourse fa-1x"></span>
          </a>
        </li>
        <!-- social -->
      </ul>
    </nav>
  </header>
  <!-- header -->
  <!-- main -->
  <div class="container-fluid">
    <div class="row">
      <!-- main -->
      <main class="col-12 col-md-9 col-xl-7 px-2 px-md-5 py-5 compas-content" role="main">
        
        
        <h1 class="display-4 p-0 mb-5">Source code for compas_fab.robots.robot</h1><div class="highlight"><pre><code>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Frame</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Sphere</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">Transformation</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">Joint</span>
<span class="kn">from</span> <span class="nn">compas.robots</span> <span class="kn">import</span> <span class="n">RobotModel</span>

<span class="kn">from</span> <span class="nn">compas_fab.robots.configuration</span> <span class="kn">import</span> <span class="n">Configuration</span>
<span class="kn">from</span> <span class="nn">compas_fab.robots.constraints</span> <span class="kn">import</span> <span class="n">Constraint</span>
<span class="kn">from</span> <span class="nn">compas_fab.robots.constraints</span> <span class="kn">import</span> <span class="n">JointConstraint</span>
<span class="kn">from</span> <span class="nn">compas_fab.robots.constraints</span> <span class="kn">import</span> <span class="n">OrientationConstraint</span>
<span class="kn">from</span> <span class="nn">compas_fab.robots.constraints</span> <span class="kn">import</span> <span class="n">PositionConstraint</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Robot&#39;</span><span class="p">,</span>
<span class="p">]</span>


<div class="viewcode-block" id="Robot"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.html#compas_fab.robots.Robot">[docs]</a><span class="k">class</span> <span class="nc">Robot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a robot.</span>

<span class="sd">    This class binds together several building blocks, such as the robot&#39;s</span>
<span class="sd">    descriptive model, its semantic information and an instance of a backend</span>
<span class="sd">    client into a cohesive programmable interface. This representation builds</span>
<span class="sd">    upon the model described in the class :class:`compas.robots.RobotModel` of</span>
<span class="sd">    the **COMPAS** framework.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    model : :class:`RobotModel`</span>
<span class="sd">        The robot model, usually created from an URDF structure.</span>
<span class="sd">    artist : :class:`compas.robots.base_artist.BaseRobotModelArtist`</span>
<span class="sd">        Instance of the artist used to visualize the robot model. Defaults to ``None``.</span>
<span class="sd">    semantics : :class:`compas_fab.robots.RobotSemantics`</span>
<span class="sd">        The semantic model of the robot. Defaults to ``None``.</span>
<span class="sd">    client : :class:`compas_fab.backends.interfaces.ClientInterface`</span>
<span class="sd">        The backend client to use for communication,</span>
<span class="sd">        e.g. :class:`compas_fab.backends.RosClient`</span>
<span class="sd">    attributes : :obj:`dict`</span>
<span class="sd">        Named attributes related to the robot instance.</span>
<span class="sd">    attached_tool : :class:`compas_fab.robots.Tool`</span>
<span class="sd">        Instance of the tool attached to the robot, if any.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Robot.__init__"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.__init__.html#compas_fab.robots.Robot.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">semantics</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_factor</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artist</span> <span class="o">=</span> <span class="n">artist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span> <span class="o">=</span> <span class="n">semantics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span> <span class="o">=</span> <span class="p">{}</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">artist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:class:`compas.robots.base_artist.BaseRobotModelArtist`: Artist used to visualize robot model.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artist</span>

    <span class="nd">@artist</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_artist</span> <span class="o">=</span> <span class="n">artist</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">joints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">links</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scale_factor</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">attach_tool_model</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">tool_model</span><span class="p">)</span>

<div class="viewcode-block" id="Robot.basic"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.basic.html#compas_fab.robots.Robot.basic">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">basic</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">joints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">links</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">materials</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the most basic instance of a robot, based only on name.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : :obj:`str`</span>
<span class="sd">            Name of the robot</span>
<span class="sd">        joints : :obj:`list` of :class:`compas.robots.Joint`, optional</span>
<span class="sd">            Robot&#39;s joints.</span>
<span class="sd">        links : :obj:`list` of :class:`compas.robots.Link`, optional</span>
<span class="sd">            Robot&#39;s links.</span>
<span class="sd">        materials : :obj:`list` of :class:`compas.robots.Material`, optional</span>
<span class="sd">            Material description of the robot.</span>
<span class="sd">        kwargs : :obj:`dict`</span>
<span class="sd">            Keyword arguments passed to the :class:`compas.robots.RobotModel`</span>
<span class="sd">            `attr` :obj:`dict`. Accessible from `Robot.model.attr`.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`Robot`</span>
<span class="sd">            Newly created instance of a robot.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot = Robot.basic(&#39;A robot&#39;)</span>
<span class="sd">        &gt;&gt;&gt; robot.name</span>
<span class="sd">        &#39;A robot&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">RobotModel</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">joints</span><span class="o">=</span><span class="n">joints</span> <span class="ow">or</span> <span class="p">[],</span> <span class="n">links</span><span class="o">=</span><span class="n">links</span> <span class="ow">or</span> <span class="p">[],</span>
                           <span class="n">materials</span><span class="o">=</span><span class="n">materials</span> <span class="ow">or</span> <span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:obj:`str`: Name of the robot, as defined by its model.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.name</span>
<span class="sd">        &#39;ur5&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">group_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:obj:`list` of :obj:`str`: All planning groups of the robot.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.group_names</span>
<span class="sd">        [&#39;manipulator&#39;, &#39;endeffector&#39;]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_semantics</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">group_names</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">main_group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:obj:`str`: Robot&#39;s main planning group.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_semantics</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">main_group_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">root_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:obj:`str`: Robot&#39;s root name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">group_states</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:obj:`dict` of :obj:`dict`: All group states of the robot.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; sorted(robot.group_states[&#39;manipulator&#39;].keys())</span>
<span class="sd">        [&#39;home&#39;, &#39;up&#39;]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_semantics</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">group_states</span>

<div class="viewcode-block" id="Robot.get_end_effector_link_name"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_end_effector_link_name.html#compas_fab.robots.Robot.get_end_effector_link_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_end_effector_link_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the name of the robot&#39;s end effector link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`str`</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.get_end_effector_link_name()</span>
<span class="sd">        &#39;ee_link&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.get_end_effector_link"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_end_effector_link.html#compas_fab.robots.Robot.get_end_effector_link">[docs]</a>    <span class="k">def</span> <span class="nf">get_end_effector_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the robot&#39;s end effector link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.robots.Link`</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; link = robot.get_end_effector_link()</span>
<span class="sd">        &gt;&gt;&gt; link.name</span>
<span class="sd">        &#39;ee_link&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_link_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.get_end_effector_frame"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_end_effector_frame.html#compas_fab.robots.Robot.get_end_effector_frame">[docs]</a>    <span class="k">def</span> <span class="nf">get_end_effector_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the frame of the robot&#39;s end effector.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>
<span class="sd">        full_configuration : :class:`Configuration`, optional</span>
<span class="sd">            The robot&#39;s full configuration, i.e. values for all configurable</span>
<span class="sd">            joints of the entire robot. Defaults to the all-zero configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Frame`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">full_configuration</span><span class="p">:</span>
            <span class="n">full_configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zero_configuration</span><span class="p">()</span>
        <span class="n">full_joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">full_configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">forward_kinematics</span><span class="p">(</span><span class="n">full_joint_state</span><span class="p">,</span> <span class="n">link_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">))</span></div>

<div class="viewcode-block" id="Robot.get_base_link_name"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_base_link_name.html#compas_fab.robots.Robot.get_base_link_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_base_link_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the name of the robot&#39;s base link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.get_base_link_name()</span>
<span class="sd">        &#39;base_link&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_base_link_name</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">get_base_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.get_base_link"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_base_link.html#compas_fab.robots.Robot.get_base_link">[docs]</a>    <span class="k">def</span> <span class="nf">get_base_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the robot&#39;s base link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.robots.Link`</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; link = robot.get_base_link()</span>
<span class="sd">        &gt;&gt;&gt; link.name</span>
<span class="sd">        &#39;base_link&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_link_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.get_base_frame"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_base_frame.html#compas_fab.robots.Robot.get_base_frame">[docs]</a>    <span class="k">def</span> <span class="nf">get_base_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the frame of the robot&#39;s base link, which is the robot&#39;s origin frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>
<span class="sd">        full_configuration : :class:`Configuration`, optional</span>
<span class="sd">            The robot&#39;s full configuration, i.e. values for all configurable</span>
<span class="sd">            joints of the entire robot. Defaults to the all-zero configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Frame`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">full_configuration</span><span class="p">:</span>
            <span class="n">full_configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zero_configuration</span><span class="p">()</span>
        <span class="n">full_joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">full_configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">forward_kinematics</span><span class="p">(</span><span class="n">full_joint_state</span><span class="p">,</span> <span class="n">link_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_base_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">))</span></div>

<div class="viewcode-block" id="Robot.get_link_names"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_link_names.html#compas_fab.robots.Robot.get_link_names">[docs]</a>    <span class="k">def</span> <span class="nf">get_link_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the names of the links in the kinematic chain.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :obj:`str`</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.get_link_names(&#39;manipulator&#39;)</span>
<span class="sd">        [&#39;base_link&#39;, &#39;shoulder_link&#39;, &#39;upper_arm_link&#39;, &#39;forearm_link&#39;, &#39;wrist_1_link&#39;, &#39;wrist_2_link&#39;, &#39;wrist_3_link&#39;, &#39;ee_link&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_link_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">ee_link_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">link_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_link_chain</span><span class="p">(</span><span class="n">base_link_name</span><span class="p">,</span> <span class="n">ee_link_name</span><span class="p">):</span>
            <span class="n">link_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">link_names</span></div>

<div class="viewcode-block" id="Robot.get_link_names_with_collision_geometry"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_link_names_with_collision_geometry.html#compas_fab.robots.Robot.get_link_names_with_collision_geometry">[docs]</a>    <span class="k">def</span> <span class="nf">get_link_names_with_collision_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the names of the links with collision geometry.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :obj:`str`</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.get_link_names_with_collision_geometry()</span>
<span class="sd">        [&#39;base_link&#39;, &#39;shoulder_link&#39;, &#39;upper_arm_link&#39;, &#39;forearm_link&#39;, &#39;wrist_1_link&#39;, &#39;wrist_2_link&#39;, &#39;wrist_3_link&#39;, &#39;ee_link&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">link</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">iter_links</span><span class="p">()</span> <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">collision</span><span class="p">]</span></div>

<div class="viewcode-block" id="Robot.get_configurable_joints"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_configurable_joints.html#compas_fab.robots.Robot.get_configurable_joints">[docs]</a>    <span class="k">def</span> <span class="nf">get_configurable_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the robot&#39;s configurable joints.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`compas.robots.Joint`</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        If semantics is set and no group is passed, it returns all configurable</span>
<span class="sd">        joints of all groups.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; joints = robot.get_configurable_joints(&#39;manipulator&#39;)</span>
<span class="sd">        &gt;&gt;&gt; [j.name for j in joints]</span>
<span class="sd">        [&#39;shoulder_pan_joint&#39;, &#39;shoulder_lift_joint&#39;, &#39;elbow_joint&#39;, &#39;wrist_1_joint&#39;, &#39;wrist_2_joint&#39;, &#39;wrist_3_joint&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">group</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="o">.</span><span class="n">get_all_configurable_joints</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">()</span></div>

<div class="viewcode-block" id="Robot.get_joint_types_by_names"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_joint_types_by_names.html#compas_fab.robots.Robot.get_joint_types_by_names">[docs]</a>    <span class="k">def</span> <span class="nf">get_joint_types_by_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of joint types given a list of joint names.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        names : :obj:`list` of :obj:`str`</span>
<span class="sd">            The names of the joints.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :attr:`compas.robots.Joint.SUPPORTED_TYPES`</span>
<span class="sd">            List of joint types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_joint_by_name</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">type</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">]</span></div>

<div class="viewcode-block" id="Robot.get_joint_by_name"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_joint_by_name.html#compas_fab.robots.Robot.get_joint_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_joint_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;RGet the joint in the robot model matching the given name.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : :obj:`str`</span>
<span class="sd">            The name of the joint.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.robots.Joint`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">get_joint_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.get_configurable_joint_names"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_configurable_joint_names.html#compas_fab.robots.Robot.get_configurable_joint_names">[docs]</a>    <span class="k">def</span> <span class="nf">get_configurable_joint_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the configurable joint names.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :obj:`str`</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        If semantics is set and no group is passed, it returns all configurable</span>
<span class="sd">        joints of all groups.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.get_configurable_joint_names(&#39;manipulator&#39;)</span>
<span class="sd">        [&#39;shoulder_pan_joint&#39;, &#39;shoulder_lift_joint&#39;, &#39;elbow_joint&#39;, \</span>
<span class="sd">        &#39;wrist_1_joint&#39;, &#39;wrist_2_joint&#39;, &#39;wrist_3_joint&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">configurable_joints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">j</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">configurable_joints</span><span class="p">]</span></div>

<div class="viewcode-block" id="Robot.get_configurable_joint_types"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_configurable_joint_types.html#compas_fab.robots.Robot.get_configurable_joint_types">[docs]</a>    <span class="k">def</span> <span class="nf">get_configurable_joint_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the configurable joint types.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :attr:`compas.robots.Joint.SUPPORTED_TYPES`</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        If :attr:`semantics` is set and no group is passed, it returns all</span>
<span class="sd">        configurable joint types of all groups.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.get_configurable_joint_types(&#39;manipulator&#39;)</span>
<span class="sd">        [0, 0, 0, 0, 0, 0]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">configurable_joints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">j</span><span class="o">.</span><span class="n">type</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">configurable_joints</span><span class="p">]</span></div>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># configurations</span>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="Robot.zero_configuration"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.zero_configuration.html#compas_fab.robots.Robot.zero_configuration">[docs]</a>    <span class="k">def</span> <span class="nf">zero_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the zero joint configuration.</span>

<span class="sd">        If zero is out of joint limits ``(upper, lower)`` then</span>
<span class="sd">        ``(upper + lower) / 2`` is used as joint value.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; robot.zero_configuration(&#39;manipulator&#39;)</span>
<span class="sd">        Configuration((0.000, 0.000, 0.000, 0.000, 0.000, 0.000), (0, 0, 0, 0, 0, 0), \</span>
<span class="sd">            (&#39;shoulder_pan_joint&#39;, &#39;shoulder_lift_joint&#39;, &#39;elbow_joint&#39;, &#39;wrist_1_joint&#39;, &#39;wrist_2_joint&#39;, &#39;wrist_3_joint&#39;))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">joint_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">joint_types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">upper</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&gt;=</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">lower</span><span class="p">):</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">upper</span> <span class="o">+</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span><span class="o">/</span><span class="mf">2.</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">joint_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">joint_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">joint_types</span><span class="p">,</span> <span class="n">joint_names</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.random_configuration"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.random_configuration.html#compas_fab.robots.Robot.random_configuration">[docs]</a>    <span class="k">def</span> <span class="nf">random_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a random configuration.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :obj:`float`</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        No collision checking is involved, the configuration may be invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">configurable_joints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="n">configurable_joints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">lower</span> <span class="o">+</span> <span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">upper</span> <span class="o">-</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">joint_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_joint_types_by_names</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">joint_types</span><span class="p">,</span> <span class="n">joint_names</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.get_group_configuration"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_group_configuration.html#compas_fab.robots.Robot.get_group_configuration">[docs]</a>    <span class="k">def</span> <span class="nf">get_group_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">full_configuration</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the group&#39;s configuration.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`</span>
<span class="sd">            The name of the planning group.</span>
<span class="sd">        full_configuration : :class:`Configuration`</span>
<span class="sd">            The configuration for all configurable joints of the robot.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`Configuration`</span>
<span class="sd">            The configuration of the group.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">full_configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_full_configuration_and_scale</span><span class="p">(</span><span class="n">full_configuration</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># adds joint_names to full_configuration and makes copy</span>
        <span class="n">full_joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">full_configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
        <span class="n">group_joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">full_joint_state</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">group_joint_names</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_types</span><span class="p">(</span><span class="n">group</span><span class="p">),</span> <span class="n">group_joint_names</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.merge_group_with_full_configuration"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.merge_group_with_full_configuration.html#compas_fab.robots.Robot.merge_group_with_full_configuration">[docs]</a>    <span class="k">def</span> <span class="nf">merge_group_with_full_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_configuration</span><span class="p">,</span> <span class="n">full_configuration</span><span class="p">,</span> <span class="n">group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the robot&#39;s full configuration by merging a group&#39;s configuration with a full configuration.</span>
<span class="sd">        The group configuration takes precedence over the full configuration in</span>
<span class="sd">        case a joint value is present in both.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group_configuration : :class:`Configuration`</span>
<span class="sd">            The configuration for one of the robot&#39;s planning groups.</span>
<span class="sd">        full_configuration : :class:`Configuration`</span>
<span class="sd">            The configuration for all configurable joints of the robot.</span>
<span class="sd">        group : :obj:`str`</span>
<span class="sd">            The name of the planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`Configuration`</span>
<span class="sd">            A full configuration with values for all configurable joints.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`ValueError`</span>
<span class="sd">            If the `full_configuration` does not specify positions for all</span>
<span class="sd">            configurable joints, or if the `group_configuration` does not</span>
<span class="sd">            specify positions for all configurable joints of the given group.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">group_configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">:</span>
            <span class="n">group_configuration</span><span class="o">.</span><span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

        <span class="n">full_configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_full_configuration_and_scale</span><span class="p">(</span><span class="n">full_configuration</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># adds joint_names to full_configuration and makes copy</span>

        <span class="n">full_configuration</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">group_configuration</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_configuration</span></div>

<div class="viewcode-block" id="Robot.get_group_names_from_link_name"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_group_names_from_link_name.html#compas_fab.robots.Robot.get_group_names_from_link_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_group_names_from_link_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the names of the groups `link_name` belongs to.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        link_name : :obj:`str`</span>
<span class="sd">            The name of a link</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :obj:`str`</span>
<span class="sd">           A list of group names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">link_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_link_names</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
                <span class="n">group_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">group_names</span></div>

<div class="viewcode-block" id="Robot.get_position_by_joint_name"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_position_by_joint_name.html#compas_fab.robots.Robot.get_position_by_joint_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_position_by_joint_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">joint_name</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the position of named joint in given configuration.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configuration : :class:`Configuration`</span>
<span class="sd">            The configuration of the configurable joints.</span>
<span class="sd">        joint_name : :obj:`str`</span>
<span class="sd">            Name of joint.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`float`</span>
<span class="sd">            Joint position for the given joint.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`ValueError`</span>
<span class="sd">            If the number of joints in the `configuration` parameter does not</span>
<span class="sd">            match the configurable joints of the given `group`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Please pass a configuration with </span><span class="si">%d</span><span class="s2"> values or specify group&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">joint_name</span><span class="p">)]</span></div>

    <span class="k">def</span> <span class="nf">_check_full_configuration_and_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Either create a full configuration or check if the passed full configuration is valid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        full_configuration : :class:`Configuration`, optional</span>
<span class="sd">            The full configuration of the whole robot, including values for all configurable joints.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        (:class:`Configuration`, :class:`Configuration`)</span>
<span class="sd">            The full configuration and the scaled full configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">full_configuration</span><span class="p">:</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zero_configuration</span><span class="p">()</span>  <span class="c1"># with joint_names</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">()</span>  <span class="c1"># full configuration</span>
            <span class="c1"># full_configuration might have passive joints specified as well, we allow this.</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">full_configuration</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Please pass a configuration with </span><span class="si">{}</span><span class="s2"> values, for all configurable joints of the robot.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)))</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="n">full_configuration</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">:</span>
                <span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span> <span class="o">=</span> <span class="n">joint_names</span>
        <span class="k">return</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">configuration</span><span class="o">.</span><span class="n">scaled</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>

<div class="viewcode-block" id="Robot.get_configuration_from_group_state"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_configuration_from_group_state.html#compas_fab.robots.Robot.get_configuration_from_group_state">[docs]</a>    <span class="k">def</span> <span class="nf">get_configuration_from_group_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">group_state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a ``Configuration`` from a group&#39;s group state.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`</span>
<span class="sd">            The name of the planning group.</span>
<span class="sd">        group_state : :obj:`str</span>
<span class="sd">            The name of the ``group_state``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`Configuration`</span>
<span class="sd">            The configuration specified by the ``group_state``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">joint_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_states</span><span class="p">[</span><span class="n">group</span><span class="p">][</span><span class="n">group_state</span><span class="p">]</span>
        <span class="n">group_joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">group_joint_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_types</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">joint_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">group_joint_names</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">group_joint_types</span><span class="p">,</span> <span class="n">group_joint_names</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># transformations, coordinate frames</span>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="Robot.transformation_RCF_WCF"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.transformation_RCF_WCF.html#compas_fab.robots.Robot.transformation_RCF_WCF">[docs]</a>    <span class="k">def</span> <span class="nf">transformation_RCF_WCF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the transformation from the robot&#39;s coordinate system (RCF) to the world coordinate system (WCF).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Transformation`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_frame</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Transformation</span><span class="o">.</span><span class="n">from_change_of_basis</span><span class="p">(</span><span class="n">base_frame</span><span class="p">,</span> <span class="n">Frame</span><span class="o">.</span><span class="n">worldXY</span><span class="p">())</span></div>

<div class="viewcode-block" id="Robot.transformation_WCF_RCF"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.transformation_WCF_RCF.html#compas_fab.robots.Robot.transformation_WCF_RCF">[docs]</a>    <span class="k">def</span> <span class="nf">transformation_WCF_RCF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the transformation from the world coordinate system (WCF) to the robot&#39;s coordinate system (RCF).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Transformation`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_frame</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Transformation</span><span class="o">.</span><span class="n">from_change_of_basis</span><span class="p">(</span><span class="n">Frame</span><span class="o">.</span><span class="n">worldXY</span><span class="p">(),</span> <span class="n">base_frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.set_RCF"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.set_RCF.html#compas_fab.robots.Robot.set_RCF">[docs]</a>    <span class="k">def</span> <span class="nf">set_RCF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot_coordinate_frame</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move the origin frame of the robot to the robot_coordinate_frame.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`NotImplementedError`</span>
<span class="sd">            Not implemented yet.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: must be applied to the model, so that base_frame is RCF</span>
        <span class="c1"># Problem: check if conversion wcf/rcf still works with backend</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Robot.get_RCF"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.get_RCF.html#compas_fab.robots.Robot.get_RCF">[docs]</a>    <span class="k">def</span> <span class="nf">get_RCF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the origin frame of the robot.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Frame`</span>
<span class="sd">            Origin frame of the robot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_frame</span><span class="p">(</span><span class="n">group</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.to_local_coordinates"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.to_local_coordinates.html#compas_fab.robots.Robot.to_local_coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">to_local_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Represent a frame from the world coordinate system (WCF) in the robot&#39;s coordinate system (RCF).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frame_WCF : :class:`compas.geometry.Frame`</span>
<span class="sd">            A frame in the world coordinate frame.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Frame`</span>
<span class="sd">            A frame in the robot&#39;s coordinate frame.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF = Frame([-0.363, 0.003, -0.147], [0.388, -0.351, -0.852], [0.276, 0.926, -0.256])</span>
<span class="sd">        &gt;&gt;&gt; frame_RCF = robot.to_local_coordinates(frame_WCF)</span>
<span class="sd">        &gt;&gt;&gt; frame_RCF</span>
<span class="sd">        Frame(Point(-0.363, 0.003, -0.147), Vector(0.388, -0.351, -0.852), Vector(0.276, 0.926, -0.256))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame_RCF</span> <span class="o">=</span> <span class="n">frame_WCF</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transformation_WCF_RCF</span><span class="p">(</span><span class="n">group</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">frame_RCF</span></div>

<div class="viewcode-block" id="Robot.to_world_coordinates"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.to_world_coordinates.html#compas_fab.robots.Robot.to_world_coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">to_world_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_RCF</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Represent a frame from the robot&#39;s coordinate system (RCF) in the world coordinate system (WCF).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frame_RCF : :class:`compas.geometry.Frame`</span>
<span class="sd">            A frame in the robot&#39;s coordinate frame.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the planning group. Defaults to the main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Frame`</span>
<span class="sd">            A frame in the world coordinate frame.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; frame_RCF = Frame([-0.363, 0.003, -0.147], [0.388, -0.351, -0.852], [0.276, 0.926, -0.256])</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF = robot.to_world_coordinates(frame_RCF)</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF</span>
<span class="sd">        Frame(Point(-0.363, 0.003, -0.147), Vector(0.388, -0.351, -0.852), Vector(0.276, 0.926, -0.256))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame_WCF</span> <span class="o">=</span> <span class="n">frame_RCF</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transformation_RCF_WCF</span><span class="p">(</span><span class="n">group</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">frame_WCF</span></div>

<div class="viewcode-block" id="Robot.from_tcf_to_t0cf"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.from_tcf_to_t0cf.html#compas_fab.robots.Robot.from_tcf_to_t0cf">[docs]</a>    <span class="k">def</span> <span class="nf">from_tcf_to_t0cf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frames_tcf</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a list of frames at the robot&#39;s tool tip (tcf frame) to frames at the robot&#39;s flange (tool0 frame) using the attached tool.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frames_tcf : :obj:`list` of :class:`compas.geometry.Frame`</span>
<span class="sd">            Frames (in WCF) at the robot&#39;s tool tip (tcf).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`compas.geometry.Frame`</span>
<span class="sd">            Frames (in WCF) at the robot&#39;s flange (tool0).</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        Exception</span>
<span class="sd">            If the attached tool is not set.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; mesh = Mesh.from_stl(compas_fab.get(&#39;planning_scene/cone.stl&#39;))</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.14, 0, 0], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; robot.attach_tool(Tool(mesh, frame))</span>
<span class="sd">        &gt;&gt;&gt; frames_tcf = [Frame((-0.309, -0.046, -0.266), (0.276, 0.926, -0.256), (0.879, -0.136, 0.456))]</span>
<span class="sd">        &gt;&gt;&gt; robot.from_tcf_to_t0cf(frames_tcf)</span>
<span class="sd">        [Frame(Point(-0.363, 0.003, -0.147), Vector(0.388, -0.351, -0.852), Vector(0.276, 0.926, -0.256))]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Please attach a tool first.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">from_tcf_to_t0cf</span><span class="p">(</span><span class="n">frames_tcf</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.from_t0cf_to_tcf"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.from_t0cf_to_tcf.html#compas_fab.robots.Robot.from_t0cf_to_tcf">[docs]</a>    <span class="k">def</span> <span class="nf">from_t0cf_to_tcf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frames_t0cf</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert frames at the robot&#39;s flange (tool0 frame) to frames at the robot&#39;s tool tip (tcf frame) using the attached tool.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frames_t0cf : :obj:`list` of :class:`compas.geometry.Frame`</span>
<span class="sd">            Frames (in WCF) at the robot&#39;s flange (tool0).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`compas.geometry.Frame`</span>
<span class="sd">            Frames (in WCF) at the robot&#39;s tool tip (tcf).</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`Exception`</span>
<span class="sd">            If the robot has no attached tool defined.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; mesh = Mesh.from_stl(compas_fab.get(&#39;planning_scene/cone.stl&#39;))</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.14, 0, 0], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; robot.attach_tool(Tool(mesh, frame))</span>
<span class="sd">        &gt;&gt;&gt; frames_t0cf = [Frame((-0.363, 0.003, -0.147), (0.388, -0.351, -0.852), (0.276, 0.926, -0.256))]</span>
<span class="sd">        &gt;&gt;&gt; robot.from_t0cf_to_tcf(frames_t0cf)</span>
<span class="sd">        [Frame(Point(-0.309, -0.046, -0.266), Vector(0.276, 0.926, -0.256), Vector(0.879, -0.136, 0.456))]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Please attach a tool first.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">from_t0cf_to_tcf</span><span class="p">(</span><span class="n">frames_t0cf</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.attach_tool"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.attach_tool.html#compas_fab.robots.Robot.attach_tool">[docs]</a>    <span class="k">def</span> <span class="nf">attach_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">touch_links</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Attach a tool to the robot independently of the model definition.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tool : :class:`Tool`</span>
<span class="sd">            The tool that should be attached to the robot&#39;s flange.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The planning group to attach this tool to. Defaults to the main</span>
<span class="sd">            planning group.</span>
<span class="sd">        touch_links : :obj:`list` of :obj:`str`, optional</span>
<span class="sd">            A list of link names the end-effector is allowed to touch. Defaults</span>
<span class="sd">            to the end-effector link.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ``None``</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        * :meth:`detach_tool`</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; mesh = Mesh.from_stl(compas_fab.get(&#39;planning_scene/cone.stl&#39;))</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.14, 0, 0], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; tool = Tool(mesh, frame)</span>
<span class="sd">        &gt;&gt;&gt; robot.attach_tool(tool)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tool</span><span class="o">.</span><span class="n">link_name</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">group</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span>
            <span class="n">tool</span><span class="o">.</span><span class="n">link_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">tool</span><span class="o">.</span><span class="n">update_touch_links</span><span class="p">(</span><span class="n">touch_links</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span> <span class="o">=</span> <span class="n">tool</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">attach_tool_model</span><span class="p">(</span><span class="n">tool</span><span class="o">.</span><span class="n">tool_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.detach_tool"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.detach_tool.html#compas_fab.robots.Robot.detach_tool">[docs]</a>    <span class="k">def</span> <span class="nf">detach_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Detach the attached tool.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        * :meth:`attach_tool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">detach_tool_model</span><span class="p">()</span></div>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># checks</span>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="Robot.ensure_client"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.ensure_client.html#compas_fab.robots.Robot.ensure_client">[docs]</a>    <span class="k">def</span> <span class="nf">ensure_client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if the client is set.</span>
<span class="sd">       Raises</span>
<span class="sd">       ------</span>
<span class="sd">       :exc:`Exception`</span>
<span class="sd">           If :attr:`client` is not set</span>
<span class="sd">       &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;This method is only callable once a client is assigned&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.ensure_semantics"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.ensure_semantics.html#compas_fab.robots.Robot.ensure_semantics">[docs]</a>    <span class="k">def</span> <span class="nf">ensure_semantics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if semantics is set.</span>
<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`Exception`</span>
<span class="sd">            If :attr:`semantics` is not set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;This method is only callable once a semantic model is assigned&#39;</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># constraints</span>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="Robot.orientation_constraint_from_frame"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.orientation_constraint_from_frame.html#compas_fab.robots.Robot.orientation_constraint_from_frame">[docs]</a>    <span class="k">def</span> <span class="nf">orientation_constraint_from_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">,</span> <span class="n">tolerances_axes</span><span class="p">,</span>
                                          <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Create an orientation constraint from a frame on the group&#39;s end-effector link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frame_WCF: :class:`compas.geometry.Frame`</span>
<span class="sd">            The frame from which we create the orientation constraint.</span>
<span class="sd">        tolerances_axes: :obj:`list` of :obj:`float`</span>
<span class="sd">            Error tolerances t\ :sub:`i` for each of the frame&#39;s axes in</span>
<span class="sd">            radians. If only one value is passed it will be uses for all 3 axes.</span>
<span class="sd">        group: :obj:`str`, optional</span>
<span class="sd">            The planning group for which we specify the constraint. Defaults to</span>
<span class="sd">            the robot&#39;s main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`OrientationConstraint`</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`ValueError`</span>
<span class="sd">            If tolerance axes given are not one or three values.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The rotation tolerance for an axis is defined by the other vector</span>
<span class="sd">        component values for rotation around corresponding axis.</span>
<span class="sd">        If you specify the tolerances_axes vector with ``[0.01, 0.01, 6.3]``, it</span>
<span class="sd">        means that the frame&#39;s x-axis and y-axis are allowed to rotate about the</span>
<span class="sd">        z-axis by an angle of 6.3 radians, whereas the z-axis would only rotate</span>
<span class="sd">        by 0.01.</span>


<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.4, 0.3, 0.4], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; tolerances_axes = [math.radians(1)] * 3</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; robot.orientation_constraint_from_frame(frame, tolerances_axes, group=group)</span>
<span class="sd">        OrientationConstraint(&#39;ee_link&#39;, [0.5, 0.5, 0.5, 0.5], [0.017453292519943295, 0.017453292519943295, 0.017453292519943295], 1.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ee_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

        <span class="n">tolerances_axes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tolerances_axes</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_axes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tolerances_axes</span> <span class="o">*=</span> <span class="mi">3</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_axes</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Must give either one or 3 values&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">OrientationConstraint</span><span class="p">(</span><span class="n">ee_link</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="o">.</span><span class="n">quaternion</span><span class="p">,</span> <span class="n">tolerances_axes</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.position_constraint_from_frame"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.position_constraint_from_frame.html#compas_fab.robots.Robot.position_constraint_from_frame">[docs]</a>    <span class="k">def</span> <span class="nf">position_constraint_from_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">,</span> <span class="n">tolerance_position</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a position constraint from a frame on the group&#39;s end-effector link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frame_WCF : :class:`compas.geometry.Frame`</span>
<span class="sd">            The frame from which we create position and orientation constraints.</span>
<span class="sd">        tolerance_position : :obj:`float`</span>
<span class="sd">            The allowed tolerance to the frame&#39;s position (defined in the</span>
<span class="sd">            robot&#39;s units).</span>
<span class="sd">        group: :obj:`str`, optional</span>
<span class="sd">            The planning group for which we specify the constraint. Defaults to</span>
<span class="sd">            the robot&#39;s main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`PositionConstraint`</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        * :meth:`PositionConstraint.from_box`</span>
<span class="sd">        * :meth:`PositionConstraint.from_mesh`</span>
<span class="sd">        * :meth:`PositionConstraint.from_sphere`</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The rotation tolerance for an axis is defined by the other vector</span>
<span class="sd">        component values for rotation around corresponding axis.</span>
<span class="sd">        If you specify the tolerances_axes vector with ``[0.01, 0.01, 6.3]``, it</span>
<span class="sd">        means that the frame&#39;s x-axis and y-axis are allowed to rotate about the</span>
<span class="sd">        z-axis by an angle of 6.3 radians, whereas the z-axis would only rotate</span>
<span class="sd">        by 0.01.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.4, 0.3, 0.4], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; tolerance_position = 0.001</span>
<span class="sd">        &gt;&gt;&gt; robot.position_constraint_from_frame(frame, tolerance_position)</span>
<span class="sd">        PositionConstraint(&#39;ee_link&#39;, BoundingVolume(2, Sphere(Point(0.400, 0.300, 0.400), 0.001)), 1.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ee_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">sphere</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="n">frame_WCF</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">tolerance_position</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PositionConstraint</span><span class="o">.</span><span class="n">from_sphere</span><span class="p">(</span><span class="n">ee_link</span><span class="p">,</span> <span class="n">sphere</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.constraints_from_frame"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.constraints_from_frame.html#compas_fab.robots.Robot.constraints_from_frame">[docs]</a>    <span class="k">def</span> <span class="nf">constraints_from_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">,</span> <span class="n">tolerance_position</span><span class="p">,</span> <span class="n">tolerances_axes</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Create a position and an orientation constraint from a frame calculated for the group&#39;s end-effector link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frame_WCF: :class:`compas.geometry.Frame`</span>
<span class="sd">            The frame from which we create position and orientation constraints.</span>
<span class="sd">        tolerance_position: :obj:`float`</span>
<span class="sd">            The allowed tolerance to the frame&#39;s position (defined in the</span>
<span class="sd">            robot&#39;s units).</span>
<span class="sd">        tolerances_axes: :obj:`list` of :obj:`float`</span>
<span class="sd">            Error tolerances t\ :sub:`i` for each of the frame&#39;s axes in</span>
<span class="sd">            radians. If only one value is passed it will be uses for all 3 axes.</span>
<span class="sd">        group: :obj:`str`, optional</span>
<span class="sd">            The planning group for which we specify the constraint. Defaults to</span>
<span class="sd">            the robot&#39;s main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`Constraint`</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        * :meth:`PositionConstraint.from_box`</span>
<span class="sd">        * :meth:`PositionConstraint.from_mesh`</span>
<span class="sd">        * :meth:`PositionConstraint.from_sphere`</span>
<span class="sd">        * :meth:`orientation_constraint_from_frame`</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The rotation tolerance for an axis is defined by the other vector</span>
<span class="sd">        component values for rotation around corresponding axis.</span>
<span class="sd">        If you specify the tolerances_axes vector with ``[0.01, 0.01, 6.3]``, it</span>
<span class="sd">        means that the frame&#39;s x-axis and y-axis are allowed to rotate about the</span>
<span class="sd">        z-axis by an angle of 6.3 radians, whereas the z-axis would only rotate</span>
<span class="sd">        by 0.01.</span>


<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.4, 0.3, 0.4], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; tolerance_position = 0.001</span>
<span class="sd">        &gt;&gt;&gt; tolerances_axes = [math.radians(1)]</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; robot.constraints_from_frame(frame, tolerance_position, tolerances_axes, group) # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        [PositionConstraint(&#39;ee_link&#39;, BoundingVolume(2, Sphere(Point(0.400, 0.300, 0.400), 0.001)), 1.0),</span>
<span class="sd">        OrientationConstraint(&#39;ee_link&#39;, [0.5, 0.5, 0.5, 0.5], [0.017453292519943295, 0.017453292519943295, 0.017453292519943295], 1.0)]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position_constraint_from_frame</span><span class="p">(</span><span class="n">frame_WCF</span><span class="p">,</span> <span class="n">tolerance_position</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
        <span class="n">oc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation_constraint_from_frame</span><span class="p">(</span><span class="n">frame_WCF</span><span class="p">,</span> <span class="n">tolerances_axes</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pc</span><span class="p">,</span> <span class="n">oc</span><span class="p">]</span></div>

<div class="viewcode-block" id="Robot.constraints_from_configuration"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.constraints_from_configuration.html#compas_fab.robots.Robot.constraints_from_configuration">[docs]</a>    <span class="k">def</span> <span class="nf">constraints_from_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">tolerances_above</span><span class="p">,</span> <span class="n">tolerances_below</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create joint constraints for all joints of the configuration.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configuration: :class:`Configuration`</span>
<span class="sd">            The target configuration.</span>
<span class="sd">        tolerances_above: :obj:`list` of :obj:`float`</span>
<span class="sd">            The tolerances above the targeted configuration&#39;s joint value on</span>
<span class="sd">            each of the joints, defining the upper bound in radians to be</span>
<span class="sd">            achieved. If only one value is passed, it will be used to create</span>
<span class="sd">            upper bounds for all joint constraints.</span>
<span class="sd">        tolerances_below: :obj:`list` of :obj:`float`</span>
<span class="sd">            The tolerances below the targeted configuration&#39;s joint value on</span>
<span class="sd">            each of the joints, defining the upper bound in radians to be</span>
<span class="sd">            achieved. If only one value is passed, it will be used to create</span>
<span class="sd">            lower bounds for all joint constraints.</span>
<span class="sd">        group: :obj:`str`, optional</span>
<span class="sd">            The planning group for which we specify the constraint. Defaults to</span>
<span class="sd">            the robot&#39;s main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`JointConstraint`</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`ValueError`</span>
<span class="sd">            If the passed configuration does not correspond to the group.</span>
<span class="sd">        :exc:`ValueError`</span>
<span class="sd">            If the passed list of tolerance values have a different length than</span>
<span class="sd">            the configuration.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Make sure that you are using the correct tolerance units if your robot</span>
<span class="sd">        has different joint types defined.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; configuration = Configuration.from_revolute_values([-0.042, 4.295, -4.110, -3.327, 4.755, 0.])</span>
<span class="sd">        &gt;&gt;&gt; tolerances_above = [math.radians(1)] * 6</span>
<span class="sd">        &gt;&gt;&gt; tolerances_below = [math.radians(1)] * 6</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; robot.constraints_from_configuration(configuration, tolerances_above, tolerances_below, group)</span>
<span class="sd">        [JointConstraint(&#39;shoulder_pan_joint&#39;, -0.042, 0.017453292519943295, 0.017453292519943295, 1.0), \</span>
<span class="sd">        JointConstraint(&#39;shoulder_lift_joint&#39;, 4.295, 0.017453292519943295, 0.017453292519943295, 1.0), \</span>
<span class="sd">        JointConstraint(&#39;elbow_joint&#39;, -4.11, 0.017453292519943295, 0.017453292519943295, 1.0), \</span>
<span class="sd">        JointConstraint(&#39;wrist_1_joint&#39;, -3.327, 0.017453292519943295, 0.017453292519943295, 1.0), \</span>
<span class="sd">        JointConstraint(&#39;wrist_2_joint&#39;, 4.755, 0.017453292519943295, 0.017453292519943295, 1.0), \</span>
<span class="sd">        JointConstraint(&#39;wrist_3_joint&#39;, 0.0, 0.017453292519943295, 0.017453292519943295, 1.0)]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">group</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span>

        <span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The passed configuration has </span><span class="si">%d</span><span class="s2"> values, the group </span><span class="si">%s</span><span class="s2"> needs however: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="n">group</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_above</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tolerances_above</span> <span class="o">=</span> <span class="n">tolerances_above</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_above</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The passed configuration has </span><span class="si">%d</span><span class="s2"> values, the tolerances_above however: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_above</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_below</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tolerances_below</span> <span class="o">=</span> <span class="n">tolerances_below</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_below</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The passed configuration has </span><span class="si">%d</span><span class="s2"> values, the tolerances_below however: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">tolerances_below</span><span class="p">)))</span>

        <span class="n">constraints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tolerance_above</span><span class="p">,</span> <span class="n">tolerance_below</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">tolerances_above</span><span class="p">,</span> <span class="n">tolerances_below</span><span class="p">):</span>
            <span class="n">constraints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">JointConstraint</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tolerance_above</span><span class="p">,</span> <span class="n">tolerance_below</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">constraints</span></div>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># services</span>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="Robot.inverse_kinematics"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.inverse_kinematics.html#compas_fab.robots.Robot.inverse_kinematics">[docs]</a>    <span class="k">def</span> <span class="nf">inverse_kinematics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">,</span> <span class="n">start_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_full_configuration</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the robot&#39;s inverse kinematic for a given frame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frame_WCF : :class:`compas.geometry.Frame`</span>
<span class="sd">            The frame to calculate the inverse kinematic for.</span>
<span class="sd">        start_configuration : :class:`Configuration`, optional</span>
<span class="sd">            If passed, the inverse will be calculated such that the calculated</span>
<span class="sd">            joint positions differ the least from the start_configuration.</span>
<span class="sd">            Defaults to the zero configuration.</span>
<span class="sd">        group: :obj:`str`, optional</span>
<span class="sd">            The planning group used for calculation. Defaults to the robot&#39;s</span>
<span class="sd">            main planning group.</span>
<span class="sd">        return_full_configuration : :obj:`bool`, optional</span>
<span class="sd">            If ``True``, returns a full configuration with all joint values</span>
<span class="sd">            specified, including passive ones if available. Defaults to ``False``.</span>
<span class="sd">        options: :obj:`dict`, optional</span>
<span class="sd">            Dictionary containing the key-value pairs of additional options.</span>
<span class="sd">            The valid options are specific to the backend in use.</span>
<span class="sd">            Check the API reference of the IK backend implementation for more details.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`compas_fab.backends.BackendError`</span>
<span class="sd">            If no configuration can be found.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`Configuration`</span>
<span class="sd">            The planning group&#39;s configuration.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF = Frame([0.3, 0.1, 0.5], [1, 0, 0], [0, 1, 0])</span>
<span class="sd">        &gt;&gt;&gt; start_configuration = robot.zero_configuration()</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; robot.inverse_kinematics(frame_WCF, start_configuration, group)                 # doctest: +SKIP</span>
<span class="sd">        Configuration((4.045, 5.130, -2.174, -6.098, -5.616, 6.283), (0, 0, 0, 0, 0, 0))    # doctest: +SKIP</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">attached_collision_meshes</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attached_collision_meshes&#39;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_client</span><span class="p">()</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">group</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="n">start_configuration</span><span class="p">,</span> <span class="n">start_configuration_scaled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_full_configuration_and_scale</span><span class="p">(</span><span class="n">start_configuration</span><span class="p">)</span>

        <span class="n">frame_WCF_scaled</span> <span class="o">=</span> <span class="n">frame_WCF</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">frame_WCF_scaled</span><span class="o">.</span><span class="n">point</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span>  <span class="c1"># must be in meters</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
            <span class="n">attached_collision_meshes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">attached_collision_meshes</span><span class="p">)</span>

        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;attached_collision_meshes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attached_collision_meshes</span>

        <span class="c1"># The returned joint names might be more than the requested ones if there are passive joints present</span>
        <span class="n">joint_positions</span><span class="p">,</span> <span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">inverse_kinematics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                                      <span class="n">frame_WCF_scaled</span><span class="p">,</span>
                                                                      <span class="n">start_configuration_scaled</span><span class="p">,</span>
                                                                      <span class="n">group</span><span class="p">,</span>
                                                                      <span class="n">options</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">return_full_configuration</span><span class="p">:</span>
            <span class="c1"># build configuration including passive joints, but no sorting</span>
            <span class="n">joint_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_joint_types_by_names</span><span class="p">(</span><span class="n">joint_names</span><span class="p">)</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">joint_positions</span><span class="p">,</span> <span class="n">joint_types</span><span class="p">,</span> <span class="n">joint_names</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># sort values for group configuration</span>
            <span class="n">joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">joint_positions</span><span class="p">))</span>
            <span class="n">group_joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">joint_state</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">group_joint_names</span><span class="p">]</span>
            <span class="n">configuration</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_types</span><span class="p">(</span><span class="n">group</span><span class="p">),</span> <span class="n">group_joint_names</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">configuration</span><span class="o">.</span><span class="n">scaled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.inverse_kinematics_deprecated"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.inverse_kinematics_deprecated.html#compas_fab.robots.Robot.inverse_kinematics_deprecated">[docs]</a>    <span class="k">def</span> <span class="nf">inverse_kinematics_deprecated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_WCF</span><span class="p">,</span> <span class="n">start_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">avoid_collisions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">constraints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attempts</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                                      <span class="n">attached_collision_meshes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">return_full_configuration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inverse_kinematics</span><span class="p">(</span><span class="n">frame_WCF</span><span class="p">,</span>
                                       <span class="n">start_configuration</span><span class="p">,</span>
                                       <span class="n">group</span><span class="p">,</span>
                                       <span class="n">return_full_configuration</span><span class="p">,</span>
                                       <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                                           <span class="n">avoid_collisions</span><span class="o">=</span><span class="n">avoid_collisions</span><span class="p">,</span>
                                           <span class="n">constraints</span><span class="o">=</span><span class="n">constraints</span><span class="p">,</span>
                                           <span class="n">attempts</span><span class="o">=</span><span class="n">attempts</span><span class="p">,</span>
                                           <span class="n">attached_collision_meshes</span><span class="o">=</span><span class="n">attached_collision_meshes</span><span class="p">,</span>
                                       <span class="p">))</span></div>

<div class="viewcode-block" id="Robot.forward_kinematics"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.forward_kinematics.html#compas_fab.robots.Robot.forward_kinematics">[docs]</a>    <span class="k">def</span> <span class="nf">forward_kinematics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate the robot&#39;s forward kinematic.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configuration: :class:`compas_fab.robots.Configuration`</span>
<span class="sd">            The full configuration to calculate the forward kinematic for. If no</span>
<span class="sd">            full configuration is passed, the zero-joint state for the other</span>
<span class="sd">            configurable joints is assumed.</span>
<span class="sd">        group: obj:`str`, optional</span>
<span class="sd">            The planning group used for the calculation. Defaults to the robot&#39;s</span>
<span class="sd">            main planning group.</span>
<span class="sd">        options: obj:`dict`, optional</span>
<span class="sd">            Dictionary containing the following key-value pairs:</span>

<span class="sd">            - ``&quot;solver&quot;``: (:obj:`str`, optional) If ``None`` calculates FK</span>
<span class="sd">              with the client if it exists or with the robot model.</span>
<span class="sd">              If ``&#39;model&#39;`` use the robot model to calculate FK.</span>
<span class="sd">              Other values depend on specific backend implementation, some backends might</span>
<span class="sd">              allow selecting different FK solvers dynamically.</span>
<span class="sd">            - ``&quot;link&quot;``: (:obj:`str`, optional) The name of the link to</span>
<span class="sd">              calculate the forward kinematics for. Defaults to the group&#39;s end</span>
<span class="sd">              effector link.</span>
<span class="sd">              Backwards compatibility note: if there&#39;s no ``link`` option, the</span>
<span class="sd">              planner will try also ``ee_link`` as fallback before defaulting</span>
<span class="sd">              to the end effector&#39;s link.</span>

<span class="sd">            There are additional options that are specific to the backend in use.</span>
<span class="sd">            Check the API reference of the FK backend implementation for more details.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`compas.geometry.Frame`</span>
<span class="sd">            The frame in the world&#39;s coordinate system (WCF).</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        :exc:`ValueError`</span>
<span class="sd">            If `link_name` doesn&#39;t match any of the :class:`Robot` instance&#39;s links.</span>
<span class="sd">        :exc:`NotImplementedError`</span>
<span class="sd">            If forward kinematic method for given `backend` is not implemented.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; configuration = Configuration.from_revolute_values([-2.238, -1.153, -2.174, 0.185, 0.667, 0.000])</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF_c = robot.forward_kinematics(configuration, group)</span>
<span class="sd">        &gt;&gt;&gt; options = {&#39;solver&#39;: &#39;model&#39;}</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF_m = robot.forward_kinematics(configuration, group, options)</span>
<span class="sd">        &gt;&gt;&gt; frame_WCF_c == frame_WCF_m</span>
<span class="sd">        True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;solver&#39;</span><span class="p">)</span>

        <span class="n">group</span> <span class="o">=</span> <span class="n">group</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="n">full_configuration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_group_with_full_configuration</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zero_configuration</span><span class="p">(),</span> <span class="n">group</span><span class="p">)</span>
        <span class="n">full_configuration</span><span class="p">,</span> <span class="n">full_configuration_scaled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_full_configuration_and_scale</span><span class="p">(</span><span class="n">full_configuration</span><span class="p">)</span>

        <span class="n">full_joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">full_configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">full_configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>

        <span class="c1"># If there&#39;s no client, we default to `model` solver if there is no other assigned.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
            <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="s1">&#39;model&#39;</span>

        <span class="c1"># Solve with the model</span>
        <span class="k">if</span> <span class="n">solver</span> <span class="o">==</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ee_link&#39;</span><span class="p">))</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">link</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">link</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_link_names</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Link name </span><span class="si">{}</span><span class="s1"> does not exist in planning group&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>

            <span class="n">frame_WCF</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">forward_kinematics</span><span class="p">(</span><span class="n">full_joint_state</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span>

        <span class="c1"># Otherwise, pass everything down to the client</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ensure_client</span><span class="p">()</span>
            <span class="n">frame_WCF</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">forward_kinematics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                       <span class="n">full_configuration_scaled</span><span class="p">,</span>
                                                       <span class="n">group</span><span class="p">,</span>
                                                       <span class="n">options</span><span class="p">)</span>

        <span class="c1"># Scale and return</span>
        <span class="n">frame_WCF</span><span class="o">.</span><span class="n">point</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span>
        <span class="k">return</span> <span class="n">frame_WCF</span></div>

<div class="viewcode-block" id="Robot.forward_kinematics_deprecated"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.forward_kinematics_deprecated.html#compas_fab.robots.Robot.forward_kinematics_deprecated">[docs]</a>    <span class="k">def</span> <span class="nf">forward_kinematics_deprecated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ee_link</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">forward_kinematics</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">ee_link</span><span class="p">))</span></div>

<div class="viewcode-block" id="Robot.plan_cartesian_motion"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.plan_cartesian_motion.html#compas_fab.robots.Robot.plan_cartesian_motion">[docs]</a>    <span class="k">def</span> <span class="nf">plan_cartesian_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frames_WCF</span><span class="p">,</span> <span class="n">start_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate a cartesian motion path (linear in tool space).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        frames_WCF : :obj:`list` of :class:`compas.geometry.Frame`</span>
<span class="sd">            The frames through which the path is defined.</span>
<span class="sd">        start_configuration : :class:`Configuration`, optional</span>
<span class="sd">            The robot&#39;s full configuration, i.e. values for all configurable</span>
<span class="sd">            joints of the entire robot, at the starting position. Defaults to</span>
<span class="sd">            the all-zero configuration.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The planning group used for calculation. Defaults to the robot&#39;s</span>
<span class="sd">            main planning group.</span>
<span class="sd">        options : :obj:`dict`, optional</span>
<span class="sd">            Dictionary containing the following key-value pairs:</span>

<span class="sd">            - max_step :: :obj:`float`, optional</span>
<span class="sd">                The approximate distance between the</span>
<span class="sd">                calculated points. (Defined in the robot&#39;s units.) Defaults to ``0.01``.</span>
<span class="sd">            - path_constraints :: :obj:`list` of :class:`compas_fab.robots.Constraint`, optional</span>
<span class="sd">                Optional constraints that can be imposed along the solution path.</span>
<span class="sd">                Note that path calculation won&#39;t work if the start_configuration</span>
<span class="sd">                violates these constraints. Defaults to ``None``.</span>
<span class="sd">            - attached_collision_meshes :: :obj:`list` of :class:`compas_fab.robots.AttachedCollisionMesh`</span>
<span class="sd">                Defaults to ``None``.</span>

<span class="sd">            There are additional options that are specific to the backend in use.</span>
<span class="sd">            Check the API reference of the cartesian motion planner backend implementation</span>
<span class="sd">            for more details.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`JointTrajectory`</span>
<span class="sd">            The calculated trajectory.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; robot.client = RosClient()</span>
<span class="sd">        &gt;&gt;&gt; robot.client.run()</span>
<span class="sd">        &gt;&gt;&gt; frames = [Frame([0.3, 0.1, 0.5], [1, 0, 0], [0, 1, 0]),\</span>
<span class="sd">                      Frame([0.5, 0.1, 0.6], [1, 0, 0], [0, 1, 0])]</span>
<span class="sd">        &gt;&gt;&gt; start_configuration = Configuration.from_revolute_values([-0.042, 0.033, -2.174, 5.282, -1.528, 0.000])</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; options = {&#39;max_step&#39;: 0.01,\</span>
<span class="sd">                       &#39;jump_threshold&#39;: 1.57,\</span>
<span class="sd">                       &#39;avoid_collisions&#39;: True}</span>
<span class="sd">        &gt;&gt;&gt; trajectory = robot.plan_cartesian_motion(frames,\</span>
<span class="sd">                                                     start_configuration,\</span>
<span class="sd">                                                     group=group,\</span>
<span class="sd">                                                     options=options)</span>
<span class="sd">        &gt;&gt;&gt; len(trajectory.points) &gt; 1</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; robot.client.close()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">max_step</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_step&#39;</span><span class="p">)</span>
        <span class="n">path_constraints</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;path_constraints&#39;</span><span class="p">)</span>
        <span class="n">attached_collision_meshes</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attached_collision_meshes&#39;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_client</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">group</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span>  <span class="c1"># ensure semantics</span>

        <span class="c1"># NOTE: start_configuration has to be a full robot configuration, such</span>
        <span class="c1"># that all configurable joints of the whole robot are defined for planning.</span>
        <span class="n">start_configuration</span><span class="p">,</span> <span class="n">start_configuration_scaled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_full_configuration_and_scale</span><span class="p">(</span><span class="n">start_configuration</span><span class="p">)</span>

        <span class="n">frames_WCF_scaled</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">frames_WCF</span><span class="p">:</span>
            <span class="n">frames_WCF_scaled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Frame</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">point</span> <span class="o">*</span> <span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">yaxis</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">path_constraints</span><span class="p">:</span>
            <span class="n">path_constraints_WCF_scaled</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">path_constraints</span><span class="p">:</span>
                <span class="n">cp</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">Constraint</span><span class="o">.</span><span class="n">JOINT</span><span class="p">:</span>
                    <span class="n">joint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_joint_by_name</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">joint_name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">joint</span><span class="o">.</span><span class="n">is_scalable</span><span class="p">():</span>
                        <span class="n">cp</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cp</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>
                <span class="n">path_constraints_WCF_scaled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cp</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_constraints_WCF_scaled</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
            <span class="n">attached_collision_meshes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">attached_collision_meshes</span><span class="p">)</span>

        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;attached_collision_meshes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attached_collision_meshes</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;path_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path_constraints</span>
        <span class="k">if</span> <span class="n">max_step</span><span class="p">:</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;max_step&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_step</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span>

        <span class="n">trajectory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">plan_cartesian_motion</span><span class="p">(</span>
            <span class="n">robot</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">frames_WCF</span><span class="o">=</span><span class="n">frames_WCF_scaled</span><span class="p">,</span>
            <span class="n">start_configuration</span><span class="o">=</span><span class="n">start_configuration_scaled</span><span class="p">,</span>
            <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>

        <span class="c1"># Scale everything back to robot&#39;s scale</span>
        <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">trajectory</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="n">pt</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>

        <span class="n">trajectory</span><span class="o">.</span><span class="n">start_configuration</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">trajectory</span></div>

<div class="viewcode-block" id="Robot.plan_cartesian_motion_deprecated"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.plan_cartesian_motion_deprecated.html#compas_fab.robots.Robot.plan_cartesian_motion_deprecated">[docs]</a>    <span class="k">def</span> <span class="nf">plan_cartesian_motion_deprecated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frames_WCF</span><span class="p">,</span> <span class="n">start_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">max_step</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">jump_threshold</span><span class="o">=</span><span class="mf">1.57</span><span class="p">,</span>
                                         <span class="n">avoid_collisions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">path_constraints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">attached_collision_meshes</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan_cartesian_motion</span><span class="p">(</span><span class="n">frames_WCF</span><span class="p">,</span>
                                          <span class="n">start_configuration</span><span class="o">=</span><span class="n">start_configuration</span><span class="p">,</span>
                                          <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span>
                                          <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                                              <span class="n">max_step</span><span class="o">=</span><span class="n">max_step</span><span class="p">,</span>
                                              <span class="n">jump_threshold</span><span class="o">=</span><span class="n">jump_threshold</span><span class="p">,</span>
                                              <span class="n">avoid_collisions</span><span class="o">=</span><span class="n">avoid_collisions</span><span class="p">,</span>
                                              <span class="n">path_constraints</span><span class="o">=</span><span class="n">path_constraints</span><span class="p">,</span>
                                              <span class="n">attached_collision_meshes</span><span class="o">=</span><span class="n">attached_collision_meshes</span><span class="p">,</span>
                                          <span class="p">))</span></div>

<div class="viewcode-block" id="Robot.plan_motion"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.plan_motion.html#compas_fab.robots.Robot.plan_motion">[docs]</a>    <span class="k">def</span> <span class="nf">plan_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goal_constraints</span><span class="p">,</span> <span class="n">start_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calculate a motion path.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        goal_constraints : list of :class:`Constraint`</span>
<span class="sd">            The goal to be achieved, defined in a set of constraints.</span>
<span class="sd">            Constraints can be very specific, for example defining value domains</span>
<span class="sd">            for each joint, such that the goal configuration is included,</span>
<span class="sd">            or defining a volume in space, to which a specific robot link (e.g.</span>
<span class="sd">            the end-effector) is required to move to.</span>
<span class="sd">        start_configuration : :class:`.Configuration`, optional</span>
<span class="sd">            The robot&#39;s full configuration, i.e. values for all configurable</span>
<span class="sd">            joints of the entire robot, at the starting position. Defaults to</span>
<span class="sd">            the all-zero configuration.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the group to plan for. Defaults to the robot&#39;s main</span>
<span class="sd">            planning group.</span>
<span class="sd">        options : :obj:`dict`, optional</span>
<span class="sd">            Dictionary containing the following key-value pairs:</span>

<span class="sd">            - path_constraints :: :obj:`list` of :class:`Constraint`, optional</span>
<span class="sd">                Optional constraints that can be imposed along the solution path.</span>
<span class="sd">                Note that path calculation won&#39;t work if the start_configuration</span>
<span class="sd">                violates these constraints. Defaults to ``None``.</span>
<span class="sd">            - attached_collision_meshes :: :obj:`list` of :class:`compas_fab.robots.AttachedCollisionMesh`</span>
<span class="sd">                Defaults to ``None``.</span>

<span class="sd">            There are additional options that are specific to the backend in use.</span>
<span class="sd">            Check the API reference of the motion planner backend implementation</span>
<span class="sd">            for more details.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`JointTrajectory`</span>
<span class="sd">            The calculated trajectory.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        Using position and orientation constraints:</span>

<span class="sd">        &gt;&gt;&gt; robot.client = RosClient()</span>
<span class="sd">        &gt;&gt;&gt; robot.client.run()</span>
<span class="sd">        &gt;&gt;&gt; frame = Frame([0.4, 0.3, 0.4], [0, 1, 0], [0, 0, 1])</span>
<span class="sd">        &gt;&gt;&gt; tolerance_position = 0.001</span>
<span class="sd">        &gt;&gt;&gt; tolerances_axes = [math.radians(1)] * 3</span>
<span class="sd">        &gt;&gt;&gt; start_configuration = Configuration.from_revolute_values([-0.042, 4.295, 0, -3.327, 4.755, 0.])</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; goal_constraints = robot.constraints_from_frame(frame, tolerance_position, tolerances_axes, group)</span>
<span class="sd">        &gt;&gt;&gt; robot.attached_tool = None</span>
<span class="sd">        &gt;&gt;&gt; trajectory = robot.plan_motion(goal_constraints, start_configuration, group, {&#39;planner_id&#39;: &#39;RRTConnectkConfigDefault&#39;})</span>
<span class="sd">        &gt;&gt;&gt; trajectory.fraction</span>
<span class="sd">        1.0</span>
<span class="sd">        &gt;&gt;&gt; len(trajectory.points) &gt; 1</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; robot.client.close()</span>

<span class="sd">        Using joint constraints (to the UP configuration):</span>

<span class="sd">        &gt;&gt;&gt; robot.client = RosClient()</span>
<span class="sd">        &gt;&gt;&gt; robot.client.run()</span>
<span class="sd">        &gt;&gt;&gt; configuration = Configuration.from_revolute_values([0.0, -1.5707, 0.0, -1.5707, 0.0, 0.0])</span>
<span class="sd">        &gt;&gt;&gt; tolerances_above = [math.radians(5)] * len(configuration.values)</span>
<span class="sd">        &gt;&gt;&gt; tolerances_below = [math.radians(5)] * len(configuration.values)</span>
<span class="sd">        &gt;&gt;&gt; group = robot.main_group_name</span>
<span class="sd">        &gt;&gt;&gt; goal_constraints = robot.constraints_from_configuration(configuration, tolerances_above, tolerances_below, group)</span>
<span class="sd">        &gt;&gt;&gt; trajectory = robot.plan_motion(goal_constraints, start_configuration, group, {&#39;planner_id&#39;: &#39;RRTConnectkConfigDefault&#39;})</span>
<span class="sd">        &gt;&gt;&gt; trajectory.fraction</span>
<span class="sd">        1.0</span>
<span class="sd">        &gt;&gt;&gt; len(trajectory.points) &gt; 1</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; robot.client.close()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">path_constraints</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;path_constraints&#39;</span><span class="p">)</span>
        <span class="n">attached_collision_meshes</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attached_collision_meshes&#39;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># TODO: for the motion plan request a list of possible goal constraints</span>
        <span class="c1"># can be passed, from which the planner will try to find a path that</span>
        <span class="c1"># satisfies at least one of the specified goal constraints. For now only</span>
        <span class="c1"># one set of goal constraints is supported.</span>

        <span class="c1"># TODO: add workspace_parameters</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_client</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">group</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span>

        <span class="c1"># NOTE: start_configuration has to be a full robot configuration, such</span>
        <span class="c1"># that all configurable joints of the whole robot are defined for planning.</span>
        <span class="n">start_configuration</span><span class="p">,</span> <span class="n">start_configuration_scaled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_full_configuration_and_scale</span><span class="p">(</span><span class="n">start_configuration</span><span class="p">)</span>

        <span class="n">goal_constraints_WCF_scaled</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">goal_constraints</span><span class="p">:</span>
            <span class="n">cp</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">Constraint</span><span class="o">.</span><span class="n">JOINT</span><span class="p">:</span>
                <span class="n">joint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_joint_by_name</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">joint_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">joint</span><span class="o">.</span><span class="n">is_scalable</span><span class="p">():</span>
                    <span class="n">cp</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cp</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>
            <span class="n">goal_constraints_WCF_scaled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cp</span><span class="p">)</span>

        <span class="c1"># Transform path constraints to RCF and scale</span>
        <span class="k">if</span> <span class="n">path_constraints</span><span class="p">:</span>
            <span class="n">path_constraints_WCF_scaled</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">path_constraints</span><span class="p">:</span>
                <span class="n">cp</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">Constraint</span><span class="o">.</span><span class="n">JOINT</span><span class="p">:</span>
                    <span class="n">joint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_joint_by_name</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">joint_name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">joint</span><span class="o">.</span><span class="n">is_scalable</span><span class="p">():</span>
                        <span class="n">cp</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cp</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>
                <span class="n">path_constraints_WCF_scaled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cp</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path_constraints_WCF_scaled</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
            <span class="n">attached_collision_meshes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">attached_collision_meshes</span><span class="p">)</span>

        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;attached_collision_meshes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attached_collision_meshes</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;path_constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path_constraints_WCF_scaled</span>

        <span class="n">trajectory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">plan_motion</span><span class="p">(</span>
            <span class="n">robot</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">goal_constraints</span><span class="o">=</span><span class="n">goal_constraints_WCF_scaled</span><span class="p">,</span>
            <span class="n">start_configuration</span><span class="o">=</span><span class="n">start_configuration_scaled</span><span class="p">,</span>
            <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Scale everything back to robot&#39;s scale</span>
        <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">trajectory</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="n">pt</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>

        <span class="n">trajectory</span><span class="o">.</span><span class="n">start_configuration</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">trajectory</span></div>

<div class="viewcode-block" id="Robot.plan_motion_deprecated"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.plan_motion_deprecated.html#compas_fab.robots.Robot.plan_motion_deprecated">[docs]</a>    <span class="k">def</span> <span class="nf">plan_motion_deprecated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">goal_constraints</span><span class="p">,</span> <span class="n">start_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">path_constraints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">planner_id</span><span class="o">=</span><span class="s1">&#39;RRTConnectkConfigDefault&#39;</span><span class="p">,</span>
                               <span class="n">num_planning_attempts</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">allowed_planning_time</span><span class="o">=</span><span class="mf">2.</span><span class="p">,</span>
                               <span class="n">max_velocity_scaling_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span>
                               <span class="n">max_acceleration_scaling_factor</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span>
                               <span class="n">attached_collision_meshes</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan_motion</span><span class="p">(</span><span class="n">goal_constraints</span><span class="p">,</span>
                                <span class="n">start_configuration</span><span class="p">,</span>
                                <span class="n">group</span><span class="p">,</span>
                                <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                                    <span class="n">path_constraints</span><span class="o">=</span><span class="n">path_constraints</span><span class="p">,</span>
                                    <span class="n">planner_id</span><span class="o">=</span><span class="n">planner_id</span><span class="p">,</span>
                                    <span class="n">num_planning_attempts</span><span class="o">=</span><span class="n">num_planning_attempts</span><span class="p">,</span>
                                    <span class="n">allowed_planning_time</span><span class="o">=</span><span class="n">allowed_planning_time</span><span class="p">,</span>
                                    <span class="n">max_velocity_scaling_factor</span><span class="o">=</span><span class="n">max_velocity_scaling_factor</span><span class="p">,</span>
                                    <span class="n">max_acceleration_scaling_factor</span><span class="o">=</span><span class="n">max_acceleration_scaling_factor</span><span class="p">,</span>
                                    <span class="n">attached_collision_meshes</span><span class="o">=</span><span class="n">attached_collision_meshes</span><span class="p">,</span>
                                <span class="p">))</span></div>

<div class="viewcode-block" id="Robot.transformed_frames"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.transformed_frames.html#compas_fab.robots.Robot.transformed_frames">[docs]</a>    <span class="k">def</span> <span class="nf">transformed_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the robot&#39;s transformed frames.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configuration : :class:`Configuration`</span>
<span class="sd">            Configuration to compute transformed frames for.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The planning group used for the calculation. Defaults to the robot&#39;s</span>
<span class="sd">            main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`compas.geometry.Frame`</span>
<span class="sd">            Transformed frames.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">):</span>
            <span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">transformed_frames</span><span class="p">(</span><span class="n">joint_state</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.transformed_axes"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.transformed_axes.html#compas_fab.robots.Robot.transformed_axes">[docs]</a>    <span class="k">def</span> <span class="nf">transformed_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the robot&#39;s transformed axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configuration : :class:`Configuration`</span>
<span class="sd">            Configuration to compute transformed axes for.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The planning group used for the calculation. Defaults to the robot&#39;s</span>
<span class="sd">            main planning group.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :obj:`list` of :class:`compas.geometry.Vector`</span>
<span class="sd">            Transformed axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">):</span>
            <span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">transformed_axes</span><span class="p">(</span><span class="n">joint_state</span><span class="p">)</span></div>

    <span class="c1"># ==========================================================================</span>
    <span class="c1"># drawing</span>
    <span class="c1"># ==========================================================================</span>

<div class="viewcode-block" id="Robot.update"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.update.html#compas_fab.robots.Robot.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">collision</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the robot&#39;s geometry.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configuration : :class:`Configuration`</span>
<span class="sd">            Instance of the configuration (joint state) to move to.</span>
<span class="sd">        group : :obj:`str`, optional</span>
<span class="sd">            The name of the group to plan for. Defaults to the robot&#39;s main</span>
<span class="sd">            planning group.</span>
<span class="sd">        visual : :obj:`bool`, optional</span>
<span class="sd">            ``True`` if the visual geometry should be also updated, otherwise ``False``.</span>
<span class="sd">            Defaults to ``True``.</span>
<span class="sd">        collision : :obj:`bool`, optional</span>
<span class="sd">            ``True`` if the collision geometry should be also updated, otherwise ``False``.</span>
<span class="sd">            Defaults to ``True``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">group</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">):</span>
            <span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joint_names</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">joint_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">joint_names</span><span class="p">,</span> <span class="n">configuration</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">joint_state</span><span class="p">,</span> <span class="n">visual</span><span class="p">,</span> <span class="n">collision</span><span class="p">)</span></div>

<div class="viewcode-block" id="Robot.draw_visual"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.draw_visual.html#compas_fab.robots.Robot.draw_visual">[docs]</a>    <span class="k">def</span> <span class="nf">draw_visual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw the robot&#39;s visual geometry using the defined :attr:`Robot.artist`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span></div>

<div class="viewcode-block" id="Robot.draw_collision"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.draw_collision.html#compas_fab.robots.Robot.draw_collision">[docs]</a>    <span class="k">def</span> <span class="nf">draw_collision</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw the robot&#39;s collision geometry using the defined :attr:`Robot.artist`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">draw_collision</span><span class="p">()</span></div>

<div class="viewcode-block" id="Robot.draw"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.draw.html#compas_fab.robots.Robot.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Alias of :meth:`draw_visual`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_visual</span><span class="p">()</span></div>

    <span class="c1"># TODO: add artist.draw_attached_tool</span>
    <span class="c1"># def draw_attached_tool(self):</span>
    <span class="c1">#     &quot;&quot;&quot;Draw the attached tool using the defined :attr:`Robot.artist`.&quot;&quot;&quot;</span>
    <span class="c1">#     if self.artist and self.attached_tool:</span>
    <span class="c1">#         return self.artist.draw_attached_tool()</span>

<div class="viewcode-block" id="Robot.scale"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.scale.html#compas_fab.robots.Robot.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scale the robot geometry by a factor (absolute).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        factor : :obj:`float`</span>
<span class="sd">            The factor to scale the robot with.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ``None``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_scale_factor</span> <span class="o">=</span> <span class="n">factor</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scale_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:obj:`float`: Robot&#39;s scale factor.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">scale_factor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_factor</span>

<div class="viewcode-block" id="Robot.info"><a class="viewcode-back" href="../../../reference/generated/compas_fab.robots.Robot.info.html#compas_fab.robots.Robot.info">[docs]</a>    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print information about the robot.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The robot&#39;s name is &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">semantics</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The planning groups are:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_names</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The main planning group is &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span><span class="p">)</span>
            <span class="n">configurable_joints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">main_group_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">configurable_joints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_configurable_joints</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The end-effector&#39;s name is &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">get_end_effector_link_name</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The robot has a tool at the </span><span class="si">%s</span><span class="s2"> link attached.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">attached_tool</span><span class="o">.</span><span class="n">link_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The robot has NO tool attached.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The base link&#39;s name is &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_link_name</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The base_frame is:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_base_frame</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The robot&#39;s joints are:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">joint</span> <span class="ow">in</span> <span class="n">configurable_joints</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">* &#39;</span><span class="si">%s</span><span class="s2">&#39; is of type &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">joint</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">Joint</span><span class="o">.</span><span class="n">SUPPORTED_TYPES</span><span class="p">)[</span><span class="n">joint</span><span class="o">.</span><span class="n">type</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">+=</span> <span class="s2">&quot; and has limits [</span><span class="si">%.3f</span><span class="s2">, </span><span class="si">%.3f</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">joint</span><span class="o">.</span><span class="n">limit</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The robot&#39;s links are:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">([</span><span class="n">link</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">links</span><span class="p">])</span></div></div>
</code></pre></div>
        
      </main>
      <!-- content -->
      <!-- sidebar -->
      <div class="col-12 col-md-3 compas-sidebar" role="navigation">
        <form id="search" class="d-flex align-items-center compas-searchbox" action="../../../search.html" method="get">
          <input class="form-control" type="text" name="q" placeholder="Search docs" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
          <button class="navbar-toggler d-md-none" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </form>
        
        
          <div id="compas-navigation" class="collapse compas-navigation">
          <ul class="nav flex-column">
<li class="nav-item"><a class="nav-link reference internal" href="../../../overview.html">Overview</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../backends.html">Working with backends</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../examples.html">Examples</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../reference.html">API Reference</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../contributing.html">Contributor’s Guide</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../authors.html">Citing</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../../../license.html">License</a></li>
</ul>

          </div>
        
      </div>
      <!-- sidebar -->
      <!-- toc -->
      <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">
        
        
      </div>
      <!-- toc -->
    </div>
  </div>
  <!-- main -->
  <!-- footer -->
  <!-- footer -->
  <div class="below py-5" style="background-color: #222;">
    <div class="container">
      <div class="row flex-column">
      <div class="col-12 col-md-6 mx-md-auto text-center">
        <h4 class="pb-3 footer-text">COMPAS</h4>
        <p class="footer-text">
          A computational framework for collaboration and research
          in Architecture, Engineering, Fabrication, and Construction.
        </p>
        <nav class="nav justify-content-center pb-3">
          <a class="nav-link mx-2 px-0 footer-link" href="http://github.com/compas-dev" target="_blank">
            <span class="fab fa-github fa-1x"></span>
          </a>
          <a class="nav-link mx-2 px-0 footer-link" href="http://forum.compas-framework.org" target="_blank">
            <span class="fab fa-discourse fa-1x"></span>
          </a>
          <a class="nav-link mx-2 px-0 footer-link" href="https://pypi.org/project/COMPAS/" target="_blank">
            <span class="fab fa-python fa-1x"></span>
          </a>
        </nav>
      </div>
      </div>
      <div class="row">
      <div class="col text-center">
        <p class="p-0 m-0 footer-text">Copyright &copy; 2017-2020 compas-dev</p>
      </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
  URL_ROOT          : '',
  VERSION           : '0.15.0',
  COLLAPSE_INDEX    : false,
  FILE_SUFFIX       : '.html',
  HAS_SOURCE        : 'false',
  SOURCELINK_SUFFIX : '.txt'
  };
  </script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https:////cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

  <script src="../../../_static/underscore.js"></script>
  <script src="../../../_static/doctools.js"></script>
  <script src="../../../_static/js/searchtools_.js"></script>

  <script>
  $(document).ready(function() {
    $(".language-default code").addClass("python");
    $(".language-python code").addClass("python");
    $(".language-bash code").addClass("bash");
    $(".language-cpp code").addClass("cpp");
    $(".language-json code").addClass("json");
    $(".language-none code").addClass("plaintext");

    hljs.initHighlighting();
    anchors.add();

    $('.nav-versions .dropdown-item').filter(function(i, ver) {
      return window.location.href.startsWith(ver.href);
    }).addClass("active");

  });


  var url = $("#doc_versions").data("url");
  var docs_site = $("#doc_versions").data("docs");

  if (url) {
    $.get(url, res=>{
      var lines = res.match(/[^\r\n]+/g);
      lines.forEach(version => {
        $("#doc_version_list").append("<a class=\"dropdown-item\" href=\""+ docs_site + version + "\">" + version + "</a>");
      });
    })
  }

  </script>
  
  
</body>
</html>